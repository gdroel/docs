---
title: 'Switch & Save View'
description: 'A drop-in view that migrates Apple subscribers to direct billing'
icon: 'gift'
---

`ZSMigrateTipView` is a self-contained view that prompts eligible users to switch from Apple billing to direct billing at a discount. It manages its own visibility, checkout flow, and dismissal state. You just add it to your layout.

<iframe
  className="w-full aspect-video rounded-xl"
  src="https://www.youtube.com/embed/M1kBXsMTKL8"
  title="Switch and Save Demo"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowFullScreen
></iframe>

## Usage

<CodeGroup>

```swift SwiftUI
ZSMigrateTipView(backgroundColor: .black, userId: currentUser.id)
```

```tsx React Native
import { ZSMigrateTipView } from 'react-native-zerosettle-kit';

<ZSMigrateTipView
  backgroundColorHex="#1E1E1E"
  userId={currentUser.id}
  style={{ marginHorizontal: 16 }}
/>
```

```dart Flutter
import 'package:zerosettle/zerosettle.dart';

ZSMigrateTipView(
  backgroundColorHex: '#1E1E1E',
  userId: currentUser.id,
)
```

</CodeGroup>

All three use the same native implementation under the hood. No additional setup is required beyond providing a background color and user ID.

<Note>
  `ZSMigrateTipView` targets users migrating from **Apple StoreKit** subscriptions to direct billing. On Android, the equivalent migration from Google Play Billing is not yet supported by this component.
</Note>

## Automatic Visibility

The view decides whether to render itself based on the user's entitlement state. You never need to write conditional logic around it.

| Condition | Behavior |
|-----------|----------|
| User has an active StoreKit subscription | âœ… View appears (user is eligible for migration) |
| User already has a web checkout entitlement | ðŸš« View is hidden (already migrated) |
| User has no active subscription | ðŸš« View is hidden (not a migration candidate) |
| User previously dismissed the view | ðŸš« View is hidden (dismissal persisted via `UserDefaults`) |
| User has not been subscribed long enough | ðŸš« View is hidden (e.g., user subscribed less than 90 days ago) |
| User is not in the rollout cohort | ðŸš« View is hidden (phased rollout has not reached this user yet) |

The minimum subscription age and rollout percentage are configured in the [dashboard migration campaign](/iap/dashboard#migration-campaigns). For example, you can set the minimum to 90 days so only users subscribed for at least 90 days see the view, and roll out to 10% of eligible users first before going to 100%. This lets you target loyal, high-retention users and control exposure as you ramp up.

On mount, the view calls `restoreEntitlements` to fetch the latest state, checks the minimum subscription age, and evaluates the rollout cohort from your dashboard config. If none of the conditions for showing are met, it renders as an `EmptyView` with no layout impact.

## Placement

The view works anywhere a standard view does. Settings screens and account pages tend to convert best.

<CodeGroup>

```swift Settings Screen
List {
    Section("Account") {
        // your existing rows...
    }

    ZSMigrateTipView(backgroundColor: .blue, userId: user.id)
        .listRowInsets(EdgeInsets())
        .listRowBackground(Color.clear)
}
```

```swift Profile / Home Screen
VStack(spacing: 16) {
    // your existing content...

    ZSMigrateTipView(backgroundColor: .indigo, userId: user.id)
        .padding(.horizontal, 16)
}
```

```swift ScrollView
ScrollView {
    // ...
    ZSMigrateTipView(backgroundColor: .black, userId: user.id)
}
```

```tsx React Native Settings
<ScrollView>
  {/* your existing content... */}
  <ZSMigrateTipView
    backgroundColorHex="#0000FF"
    userId={user.id}
    style={{ marginHorizontal: 16 }}
  />
</ScrollView>
```

```dart Flutter Settings
ListView(
  children: [
    // your existing rows...
    ZSMigrateTipView(
      backgroundColorHex: '#0000FF',
      userId: user.id,
    ),
  ],
)
```

```dart Flutter Profile / Home
Column(
  children: [
    // your existing content...
    Padding(
      padding: EdgeInsets.symmetric(horizontal: 16),
      child: ZSMigrateTipView(
        backgroundColorHex: '#3F00B5',
        userId: user.id,
      ),
    ),
  ],
)
```

</CodeGroup>

## Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `backgroundColor` | `Color` (SwiftUI) / `string` (React Native, Flutter) | Background color for the card. Pass a `Color` in SwiftUI or a hex string like `"#1E1E1E"` in React Native and Flutter. |
| `userId` | `String` | The user identifier passed to the checkout backend. |

The button copy, discount amount, and messaging are controlled from the [dashboard migration campaign](/iap/dashboard#migration-campaigns). No code change needed.

## Experimentation

The discount, messaging, and targeting are all controlled from the [dashboard](/iap/dashboard#migration-campaigns), so you can iterate without shipping an app update.

| Setting | What it controls |
|---------|-----------------|
| **Discount %** | The percentage off the web price shown in the CTA (e.g., 15% off) |
| **Title** | The heading displayed in the tip view |
| **Message** | The body text explaining the offer |
| **Minimum subscription age** | Minimum subscription age in days before the view appears |
| **Rollout %** | Percentage of eligible users who see the view |

Adjust these at any time to test different offers. For example, start with a 10% discount at 180 days tenure rolled out to 10% of users, then broaden to 15% off at 90 days for 100% of users and compare conversion rates in your dashboard analytics.

## Debugging

The view may be hidden during development because it was previously dismissed. Reset the persisted state:

<CodeGroup>

```swift SwiftUI
ZSMigrateTipView.resetMigrateTipState()
```

```tsx React Native
import { ZSMigrateTipModule } from 'react-native-zerosettle-kit';

ZSMigrateTipModule.resetMigrateTipState();
```

```dart Flutter
import 'package:zerosettle/zerosettle.dart';

ZSMigrateTipView.resetMigrateTipState();
```

</CodeGroup>

The view logs its visibility decisions to the console with the prefix `[ZSMigrateTipView Business Logic]`, including which condition caused it to show or hide.

## Next Steps

<CardGroup cols={2}>
  <Card title="Dashboard" icon="gauge" href="/iap/dashboard#migration-campaigns">
    Configure your migration campaign and discount
  </Card>
  <Card title="StoreKit Integration" icon="apple" href="/iap/storekit-integration">
    Run StoreKit and web checkout side by side
  </Card>
</CardGroup>
