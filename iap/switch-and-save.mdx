---
title: 'Switch & Save View'
description: 'A drop-in view that switches Apple subscribers to direct billing'
icon: 'gift'
---

`ZSMigrateTipView` is a self-contained view that prompts eligible users to switch from Apple billing to direct billing at a discount. It manages its own visibility, checkout flow, and dismissal state. You just add it to your layout.

<iframe
  className="w-full aspect-video rounded-xl"
  src="https://www.youtube.com/embed/M1kBXsMTKL8"
  title="Switch and Save Demo"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowFullScreen
></iframe>

## Usage

<CodeGroup>

```swift SwiftUI
ZSMigrateTipView(
    userId: currentUser.id,
    backgroundColor: .black,                        // optional
    titleFont: .system(size: 20, weight: .bold),    // optional
    bodyFont: .system(size: 16),                     // optional
    ctaFont: .system(size: 17, weight: .bold),       // optional
    borderColor: .white.opacity(0.2),                // optional
    onEvent: { event in                              // optional
        switch event {
        case .ctaTapped:              print("user tapped CTA")
        case .checkoutCompleted:      print("web checkout succeeded")
        case .appleSubscriptionManagementOpened:
                                      print("opened Apple sub management")
        case .migrationCompleted:     print("full migration done")
        case .dismissed:              print("view dismissed")
        }
    }
)
```

```tsx React Native
import { ZSMigrateTipView } from 'react-native-zerosettle-kit';

<ZSMigrateTipView
  userId={currentUser.id}
  backgroundColorHex="#1E1E1E"
  style={{ marginHorizontal: 16 }}
/>
```

```dart Flutter
import 'package:zerosettle/zerosettle.dart';

ZSMigrateTipView(
  userId: currentUser.id,
  backgroundColor: Color(0xFF1E1E1E),
)
```

```kotlin Kotlin
// ZSMigrateTipView is currently iOS-only (StoreKit â†’ web checkout switch and save).
// Android switch and save from Play Billing is not yet supported by this component.
```

</CodeGroup>

All three use the same native implementation under the hood. Only `userId` is required â€” everything else has sensible defaults.

<Note>
  `ZSMigrateTipView` targets users switching from **Apple StoreKit** subscriptions to direct billing. On Android, the equivalent switch and save flow from Google Play Billing is not yet supported by this component.
</Note>

## Automatic Visibility

The view decides whether to render itself based on the user's entitlement state. You never need to write conditional logic around it.

| Condition | Behavior |
|-----------|----------|
| User has a StoreKit subscription that matches the dashboard-configured product | âœ… View appears (user is eligible to switch and save) |
| User already has a web checkout entitlement | ðŸš« View is hidden (already switched) |
| User has no active subscription | ðŸš« View is hidden (not a switch and save candidate) |
| User previously dismissed the view | ðŸš« View is hidden (dismissal persisted via `UserDefaults`) |
| User has not been subscribed long enough | ðŸš« View is hidden (e.g., user subscribed less than 90 days ago) |
| User is not in the rollout cohort | ðŸš« View is hidden (phased rollout has not reached this user yet) |

The minimum subscription age and rollout percentage are configured in the [dashboard switch and save campaign](/iap/dashboard#migration-campaigns). For example, you can set the minimum to 90 days so only users subscribed for at least 90 days see the view, and roll out to 10% of eligible users first before going to 100%. This lets you target loyal, high-retention users and control exposure as you ramp up.

On mount, the view checks the minimum subscription age and evaluates the rollout cohort from your dashboard config. If none of the conditions for showing are met, it renders as an `EmptyView` with no layout impact.

## Placement

The view works anywhere a standard view does. Settings screens and account pages tend to convert best.

<CodeGroup>

```swift Settings Screen
List {
    Section("Account") {
        // your existing rows...
    }

    ZSMigrateTipView(userId: user.id, backgroundColor: .blue)
        .listRowInsets(EdgeInsets())
        .listRowBackground(Color.clear)
}
```

```swift Profile / Home Screen
VStack(spacing: 16) {
    // your existing content...

    ZSMigrateTipView(userId: user.id, backgroundColor: .indigo)
        .padding(.horizontal, 16)
}
```

```swift ScrollView
ScrollView {
    // ...
    ZSMigrateTipView(userId: user.id)
}
```

```tsx React Native Settings
<ScrollView>
  {/* your existing content... */}
  <ZSMigrateTipView
    userId={user.id}
    backgroundColorHex="#0000FF"
    style={{ marginHorizontal: 16 }}
  />
</ScrollView>
```

```dart Flutter Settings
ListView(
  children: [
    // your existing rows...
    ZSMigrateTipView(
      userId: user.id,
      backgroundColor: Color(0xFF0000FF),
    ),
  ],
)
```

```dart Flutter Profile / Home
Column(
  children: [
    // your existing content...
    Padding(
      padding: EdgeInsets.symmetric(horizontal: 16),
      child: ZSMigrateTipView(
        userId: user.id,
        backgroundColor: Color(0xFF3F00B5),
      ),
    ),
  ],
)
```

```kotlin Kotlin
// ZSMigrateTipView is currently iOS-only (StoreKit â†’ web checkout switch and save).
// Android switch and save from Play Billing is not yet supported by this component.
```

</CodeGroup>

## Parameters

### All platforms

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `userId` | `String` | Required | The user identifier passed to the checkout backend. |
| `backgroundColor` | `Color` (SwiftUI, Flutter) / `string` (React Native) | `.black` / `"#000000"` | Background color for the card. Pass a `Color` in SwiftUI and Flutter, or a hex string in React Native. |

### SwiftUI only

These optional parameters are available on the native SwiftUI view. React Native and Flutter wrappers use the defaults.

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `titleFont` | `Font?` | System bold | Custom font for the title text. |
| `bodyFont` | `Font?` | System default | Custom font for the body/message text. |
| `ctaFont` | `Font?` | System bold | Custom font for the CTA button text. |
| `borderColor` | `Color?` | `nil` (no border) | Border color applied as a rounded rectangle stroke on the card. |
| `onEvent` | `((MigrationTipView.Event) -> Void)?` | `nil` | Closure invoked when a lifecycle event occurs. See **Event Types** below. |

The button copy, discount amount, and messaging are controlled from the [dashboard switch and save campaign](/iap/dashboard#migration-campaigns). No code change needed.

### Event Types

The `onEvent` callback receives a `MigrationTipView.Event` value as the user progresses through the migration flow:

| Event | When it fires |
|-------|--------------|
| `.ctaTapped` | The user tapped the main CTA button to begin checkout. |
| `.checkoutCompleted` | The web checkout completed successfully. The user now has a web entitlement, but their Apple subscription is still active. |
| `.appleSubscriptionManagementOpened` | The user opened Apple's subscription-management sheet to cancel their Apple billing. |
| `.migrationCompleted` | The full migration flow is finished â€” web checkout succeeded **and** the Apple subscription-management sheet was shown. |
| `.dismissed` | The view was dismissed (close button, auto-dismiss after completion, or the user became ineligible). |

Events fire in lifecycle order: `ctaTapped` â†’ `checkoutCompleted` â†’ `appleSubscriptionManagementOpened` â†’ `migrationCompleted` â†’ `dismissed`. Not every event is guaranteed â€” for example, a user who dismisses the view before completing checkout will only trigger `ctaTapped` then `dismissed`.

<Note>
  `onDismiss` is deprecated but still works. It maps to `onEvent` and only fires on `.dismissed`. Migrate to `onEvent` for full visibility into the flow.
</Note>

## Experimentation

The discount, messaging, and targeting are all controlled from the [dashboard](/iap/dashboard#migration-campaigns), so you can iterate without shipping an app update.

| Setting | What it controls |
|---------|-----------------|
| **Discount %** | The percentage off the web price shown in the CTA (e.g., 15% off) |
| **Title** | The heading displayed in the tip view |
| **Message** | The body text explaining the offer |
| **Minimum subscription age** | Minimum subscription age in days before the view appears |
| **Rollout %** | Percentage of eligible users who see the view |

Adjust these at any time to test different offers. For example, start with a 10% discount at 180 days tenure rolled out to 10% of users, then broaden to 15% off at 90 days for 100% of users and compare conversion rates in your dashboard analytics.

## Debugging

The view may be hidden during development because it was previously dismissed. Reset the persisted state:

<CodeGroup>

```swift SwiftUI
ZSMigrationManager.resetDismissedState()
```

```tsx React Native
import { resetMigrateTipState } from 'react-native-zerosettle-kit';

resetMigrateTipState();
```

```dart Flutter
await ZeroSettle.instance.resetMigrateTipState();
```

```kotlin Kotlin
// Not available on Android â€” ZSMigrateTipView is iOS-only.
```

</CodeGroup>

<Note>
  `ZSMigrateTipView.resetMigrateTipState()` still works but is deprecated. Use `ZSMigrationManager.resetDismissedState()` instead.
</Note>

The view logs its visibility decisions to the console with the prefix `[ZSMigrateTipView Business Logic]`, including which condition caused it to show or hide.

## Next Steps

<CardGroup cols={2}>
  <Card title="Custom Switch and Save UI" icon="wand-magic-sparkles" href="/iap/migration-manager">
    Build your own switch and save experience with ZSMigrationManager
  </Card>
  <Card title="Dashboard" icon="gauge" href="/iap/dashboard#migration-campaigns">
    Configure your switch and save campaign and discount
  </Card>
  <Card title="StoreKit Integration" icon="apple" href="/iap/storekit-integration">
    Run StoreKit and web checkout side by side
  </Card>
</CardGroup>
