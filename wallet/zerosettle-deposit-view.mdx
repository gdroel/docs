---
title: 'ZeroSettle Deposit View'
description: 'Present a prebuilt UI for USDC deposits to Solana.'
icon: 'credit-card'
---

`ZSDepositView` is a prebuilt, full-featured view controller that handles the entire USDC deposit flow. It provides a polished UI for amount selection, payment method switching, transaction status, and error handling—so you don't have to build this from scratch.

**All deposits are USDC on Solana** - users can deposit USDC using Apple Pay, Phantom, or Metamask wallet providers.

Use the prebuilt view when:
- You want to get USDC deposits working quickly without building custom UI
- You're happy with the default design and flow
- You need a consistent deposit experience across your app

For full control over the UI and flow, use the [ZeroSettle Deposit API](/wallet/zerosettle-deposit-api) instead.

## Basic Usage

The simplest integration requires just a Solana address for USDC deposits. All three payment methods (Apple Pay, Phantom, Metamask) are shown by default.

```swift
import ZSKit

let depositView = ZSDepositView(
    walletAddress: "7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU"
)
present(depositView, animated: true)
```

The view automatically:
- Detects which wallets are installed on the user's device
- Disables or hides unavailable payment methods
- Handles amount input with USDC validation
- Shows real-time transaction status on Solana
- Displays success or error states

<Tip>
  You can present `ZSDepositView` modally (using `present()`) or push it onto a navigation stack (using `navigationController?.pushViewController()`). Both work seamlessly.
</Tip>

<Note>
  The `walletAddress` parameter must be a valid Solana address. All deposits—whether from Apple Pay, Phantom, or Metamask—are USDC deposited to this Solana address.
</Note>

## Filtering Payment Methods

Restrict which payment methods are available using the `paymentMethods` parameter. This is useful when:
- You only want to accept specific payment types
- You're gradually rolling out new payment methods
- Different user segments should see different options

```swift
import ZSKit

let solanaAddress = "7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU"

// Only show crypto wallets (no Apple Pay)
let depositView = ZSDepositView(
    walletAddress: solanaAddress,
    paymentMethods: [.phantom, .metamask]
)
present(depositView, animated: true)
```

```swift
// Only show Apple Pay
let depositView = ZSDepositView(
    walletAddress: solanaAddress,
    paymentMethods: [.applePay]
)
present(depositView, animated: true)
```

```swift
// Only show Phantom (direct USDC transfer)
let depositView = ZSDepositView(
    walletAddress: solanaAddress,
    paymentMethods: [.phantom]
)
navigationController?.pushViewController(depositView, animated: true)
```

<Warning>
  If you specify payment methods that aren't installed (e.g., `.phantom` when Phantom isn't on the device), the view will show an installation prompt instead of the deposit form.
</Warning>

## Handling Success and Errors

Use callback closures to respond when USDC deposits complete or fail. The view handles all UI states internally, but you'll typically want to:
- Save the Solana transaction to your backend
- Update app state or user USDC balance
- Navigate to a confirmation screen
- Track analytics

```swift
import ZSKit

let depositView = ZSDepositView(
    walletAddress: "7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU",
    onSuccess: { transaction in
        // USDC deposit completed successfully
        print("✅ USDC deposit successful: \(transaction.id)")
        print("Amount: \(transaction.amountInCents / 100) USDC")
        
        // Save to backend
        API.saveUSDCTransaction(transaction)
        
        // Update local state
        UserDefaults.standard.set(transaction.id, forKey: "lastSolanaTransaction")
        
        // Track analytics
        Analytics.track("usdc_deposit_completed", properties: [
            "usdc_amount": transaction.amountInCents / 100,
            "method": "\(transaction.paymentMethod)",
            "solana_signature": transaction.id
        ])
        
        // Navigate or update UI
        self.updateUserUSDCBalance()
        self.showSolanaExplorerLink(signature: transaction.id)
    },
    onError: { error in
        // Transaction failed
        print("❌ USDC deposit failed: \(error.localizedDescription)")
        
        // Track analytics
        Analytics.track("usdc_deposit_failed", properties: [
            "error": error.localizedDescription
        ])
        
        // The view already shows error UI to the user,
        // but you can do additional handling here
    }
)
present(depositView, animated: true)
```

<Note>
  The view shows its own error UI to users (alerts, error messages, etc.), so `onError` is primarily for logging, analytics, or backend updates. You don't need to show additional error UI unless you want to.
</Note>

## Complete Initialization Example

Here's a full example showing all initialization options:

```swift
import UIKit
import ZSKit

class FundWalletViewController: UIViewController {
    
    let solanaAddress: String
    
    init(solanaAddress: String) {
        self.solanaAddress = solanaAddress
        super.init(nibName: nil, bundle: nil)
    }
    
    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }
    
    func showDepositView() {
        let depositView = ZSDepositView(
            walletAddress: solanaAddress,
            paymentMethods: [.applePay, .phantom, .metamask], // Optional, this is the default
            onSuccess: { [weak self] transaction in
                guard let self = self else { return }
                
                // 1. Save Solana transaction to backend
                self.saveSolanaTransactionToBackend(transaction)
                
                // 2. Update UI
                self.dismiss(animated: true) {
                    self.showSuccessMessage(transaction: transaction)
                }
                
                // 3. Refresh user USDC balance
                self.refreshUserUSDCBalance()
            },
            onError: { [weak self] error in
                // Log error for debugging
                print("USDC deposit error: \(error)")
                
                // Track for monitoring
                ErrorTracker.log(error, context: "usdc_deposit_flow")
                
                // The view handles showing error to user,
                // but we can do additional cleanup here
                self?.resetDepositState()
            }
        )
        
        present(depositView, animated: true)
    }
    
    private func saveSolanaTransactionToBackend(_ transaction: Transaction) {
        // Save Solana signature and USDC amount to your backend
        let params = [
            "solana_signature": transaction.id,
            "usdc_amount": transaction.amountInCents / 100,
            "payment_method": "\(transaction.paymentMethod)"
        ]
        // Your API call here
    }
    
    private func showSuccessMessage(transaction: Transaction) {
        let usdcAmount = transaction.amountInCents / 100
        let alert = UIAlertController(
            title: "USDC Deposit Successful",
            message: "Your deposit of \(usdcAmount) USDC has been confirmed on Solana!",
            preferredStyle: .alert
        )
        alert.addAction(UIAlertAction(title: "View on Solscan", style: .default) { _ in
            let url = URL(string: "https://solscan.io/tx/\(transaction.id)")!
            UIApplication.shared.open(url)
        })
        alert.addAction(UIAlertAction(title: "OK", style: .cancel))
        present(alert, animated: true)
    }
    
    private func refreshUserUSDCBalance() {
        // Refresh your app's USDC balance display
    }
    
    private func resetDepositState() {
        // Any cleanup needed after error
    }
}
```

## Parameters Reference

| Parameter | Type | Required | Default | Description |
| --- | --- | --- | --- | --- |
| `walletAddress` | `String` | ✅ Yes | - | Destination Solana address where USDC will be deposited. Must be a valid base58-encoded Solana address. Same address used for all payment methods |
| `paymentMethods` | `[PaymentMethod]` | No | `[.applePay, .phantom, .metamask]` | Array of payment methods to show in the view. Users can switch between these options. All methods deposit USDC to the Solana address |
| `onSuccess` | `(Transaction) -> Void` | No | `nil` | Callback invoked when a USDC deposit completes successfully. Use this to save the transaction, update UI, or track analytics |
| `onError` | `(Error) -> Void` | No | `nil` | Callback invoked when a deposit fails. The view already shows error UI, but use this for logging or additional handling |

## Available Payment Methods

All payment methods deposit USDC on Solana:

| Method | Description | User Experience |
| --- | --- | --- |
| `.applePay` | USDC deposit via Apple Pay | Shows Apple Pay sheet for USDC deposit |
| `.phantom` | USDC transfer from Phantom wallet | Opens Phantom app to sign USDC SPL token transfer |
| `.metamask` | USDC deposit from Metamask | Opens Metamask app for USDC deposit |

## View Behavior

The `ZSDepositView` automatically handles:

✅ **Amount Input** - Formatted text field with validation, minimum/maximum amounts, and USDC currency display

✅ **Payment Method Switching** - Segmented control or buttons to switch between available wallet providers (Apple Pay, Phantom, Metamask)

✅ **Wallet Detection** - Automatically detects if Phantom/Metamask are installed and shows installation prompts if needed

✅ **Loading States** - Shows spinners and status messages during transaction processing

✅ **Transaction Status** - Real-time updates showing "Pending", "Confirming", "Confirmed" states for Solana transactions

✅ **Error Handling** - User-friendly error messages with retry options for recoverable errors

✅ **Dismissal** - "Cancel" or "Done" button to dismiss the view (calls `onError` with `.userCancelled` if transaction was in progress)

<Note>
  **Need more control?** Use the [ZeroSettle Deposit API](/wallet/zerosettle-deposit-api) to build fully custom UIs with direct access to payment rails.
</Note>
